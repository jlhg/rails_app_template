# RuboCop Configuration Template
# This file is generated from rails_app_template/.rubocop.yml
# It contains general Ruby/Rails coding standards without project-specific rules

# Merge configuration instead of replacing
# This allows safe extension of this config in .rubocop_todo.yml or other files
inherit_mode:
  merge:
    - Exclude

AllCops:
  NewCops: enable
  TargetRubyVersion: 3.4
  TargetRailsVersion: 8.0
  Exclude:
    - bin/*
    - db/schema.rb
    - db/migrate/*.rb
    - lib/templates/**/*
    - node_modules/**/*
    - vendor/**/*

# Load RuboCop extensions using plugin mechanism
plugins:
  - rubocop-rails
  - rubocop-rspec

Layout/FirstArgumentIndentation:
  EnforcedStyle: special_for_inner_method_call_in_parentheses
Layout/FirstHashElementIndentation:
  EnforcedStyle: special_inside_parentheses
Layout/HashAlignment:
  Enabled: true
  EnforcedHashRocketStyle: table
  EnforcedColonStyle: table
Layout/MultilineMethodCallIndentation:
  EnforcedStyle: indented_relative_to_receiver
Layout/LineLength:
  Enabled: false
Lint/ConstantDefinitionInBlock:
  Enabled: false
Lint/DuplicateBranch:
  Enabled: false
Lint/EmptyBlock:
  Enabled: false
Lint/RaiseException:
  Enabled: true
Lint/StructNewOverride:
  Enabled: true
Lint/RescueException:
  Enabled: false
Metrics/AbcSize:
  Enabled: false
Metrics/BlockLength:
  Enabled: false
Metrics/BlockNesting:
  Enabled: false
Metrics/ClassLength:
  Enabled: false
Metrics/CyclomaticComplexity:
  Enabled: false
Metrics/MethodLength:
  Enabled: false
Metrics/ModuleLength:
  Enabled: false
Metrics/ParameterLists:
  Enabled: false
Metrics/PerceivedComplexity:
  Enabled: false
Naming/AccessorMethodName:
  Enabled: false
Naming/MethodParameterName:
  AllowNamesEndingInNumbers: true
  MinNameLength: 1
Naming/PredicatePrefix:
  Enabled: false
Naming/VariableNumber:
  Enabled: false
Style/AsciiComments:
  Enabled: false
Style/ClassAndModuleChildren:
  Enabled: false
Style/CombinableLoops:
  Enabled: false
Style/ConditionalAssignment:
  EnforcedStyle: assign_inside_condition
  IncludeTernaryExpressions: false
Style/Documentation:
  Enabled: false
Style/EmptyMethod:
  EnforcedStyle: expanded
Style/FrozenStringLiteralComment:
  Enabled: false
Style/GuardClause:
  Enabled: false
Style/HashEachMethods:
  Enabled: false
Style/HashLikeCase:
  Enabled: false
Style/HashSyntax:
  EnforcedShorthandSyntax: never
Style/HashTransformKeys:
  Enabled: false
Style/HashTransformValues:
  Enabled: false
Style/IfInsideElse:
  Enabled: false
Style/IfUnlessModifier:
  Enabled: false
Style/MinMaxComparison:
  Enabled: false
Style/NegatedIf:
  Enabled: false
Style/Next:
  Enabled: false
Style/NumericLiterals:
  Enabled: false
Style/NumericPredicate:
  Enabled: false
Style/RedundantReturn:
  Enabled: false
Style/RegexpLiteral:
  EnforcedStyle: slashes
  AllowInnerSlashes: true
Style/RescueStandardError:
  Enabled: false
Style/SoleNestedConditional:
  Enabled: false
Style/StringConcatenation:
  Enabled: false
Style/StringLiterals:
  ConsistentQuotesInMultiline: true
  EnforcedStyle: double_quotes
Style/SymbolArray:
  EnforcedStyle: brackets
Style/WordArray:
  EnforcedStyle: brackets
Style/YodaCondition:
  Enabled: false
Style/ZeroLengthPredicate:
  Enabled: false

# RSpec configurations for API testing
# API integration tests have different requirements than unit tests

# API tests typically validate: status code, headers, body structure, and specific fields
# Default Max: 1 is too restrictive for real-world API testing
RSpec/MultipleExpectations:
  Max: 5

# API integration tests include: test data setup, request execution, and response validation
# Set to 20 to accommodate complex integration scenarios while still encouraging clarity
RSpec/ExampleLength:
  Max: 20
  # Count certain constructs as one line to avoid penalizing readable code
  CountAsOne:
    - array
    - hash
    - heredoc

# Task specs legitimately need before(:all) for loading Rake tasks once
# This is a performance optimization, not a code smell
RSpec/BeforeAfterAll:
  Exclude:
    - 'spec/tasks/**/*_spec.rb'

# API tests often organize by: controller -> action -> context -> edge cases
# Default Max: 3 can be limiting for comprehensive API test organization
RSpec/NestedGroups:
  Max: 5

# API tests may use descriptive context names beyond "when/with/without"
# Examples: "environment files", "git files", etc. are clear in API security testing
RSpec/ContextWording:
  Enabled: false
