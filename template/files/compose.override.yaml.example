# Docker Compose Override for Local Development
#
# This file is for local development with Docker (includes dev/test gems).
# Copy this file to compose.override.yaml and customize as needed.

services:
  rails:
    build:
      args:
        # Install ALL gems including development and test groups
        BUNDLE_WITHOUT: ""
    environment:
      # Development environment
      - RAILS_ENV=development
      # Disable frozen string literals in development for easier debugging
      - RUBYOPT=
      # Lower thread count for development
      - RAILS_MAX_THREADS=5
      - RAILS_MIN_THREADS=5
      # Single worker for faster code reload
      - WEB_CONCURRENCY=0
    stop_grace_period: 10s  # Fast restart for development (single worker mode)
    volumes:
      # Live code reload (mount source code into container)
      - .:/rails
      - rails-logs-dev:/rails/log
      - rails-tmp-dev:/rails/tmp

volumes:
  rails-logs-dev:
  rails-tmp-dev:
